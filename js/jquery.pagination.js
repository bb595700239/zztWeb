jQuery.fn.pagination=function(e,t){return t=jQuery.extend({items_per_page:20,num_display_entries:4,current_page:0,num_edge_entries:1,link_to:"#",first_text:"第一页",prev_text:"上一页",next_text:"下一页",last_text:"最后一页",jump_text:"GO",isSum:!0,isJump:!0,jump_format_text:"页码不正确",jump_outofrange_text:"页码超出范围",jump_null_text:"请输入页码",ellipse_text:"...",first_show_always:!0,prev_show_always:!0,next_show_always:!0,last_show_always:!0,callback:function(){return!0}},t||{}),this.each(function(){function n(){return Math.ceil(e/t.items_per_page)}function a(){var e=Math.ceil(t.num_display_entries/2),a=n(),i=a-t.num_display_entries,s=r>e?Math.max(Math.min(r-e,i),0):0,l=r>e?Math.min(r+e,a):Math.min(t.num_display_entries,a);return[s,l]}function i(e,n){r=e,s();var a=t.callback(e,l);return a||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0),a}function s(){l.empty();var s=a(),u=n(),_=function(e){return function(t){return i(e,t)}},p=function(e,t){if(e=0>e?0:u>e?e:u-1,t=jQuery.extend({text:e+1,classes:""},t||{}),e==r)var n=jQuery("<span class='page-num on'>"+t.text+"</span>");else var n=jQuery("<span  class='page-num'>"+t.text+"</span>").bind("click",_(e));t.classes&&n.addClass(t.classes),l.append(n)};if(t.first_text&&(r>0||t.first_show_always),t.prev_text&&(r>0||t.prev_show_always)&&p(r-1,{text:t.prev_text,classes:"prev"}),s[0]>0&&t.num_edge_entries>0){for(var o=Math.min(t.num_edge_entries,s[0]),c=0;o>c;c++)p(c);t.num_edge_entries<s[0]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(l)}for(var c=s[0];c<s[1];c++)p(c);if(s[1]<u&&t.num_edge_entries>0){u-t.num_edge_entries>s[1]&&t.ellipse_text&&jQuery("<span>"+t.ellipse_text+"</span>").appendTo(l);for(var d=Math.max(u-t.num_edge_entries,s[1]),c=d;u>c;c++)p(c)}if(t.next_text&&(u-1>r||t.next_show_always)&&p(r+1,{text:t.next_text,classes:"next"}),t.last_text&&(u-1>r||t.last_show_always),t.isJump){l.append(jQuery("<span class='total-info'>共"+n()+"页/"+e+"条记录 </span>")),l.append("<span>跳转到</span>"),l.append(jQuery("<span><input type='text' style='text-align:center;font-weight:bold' id='jump-index' title='请输入正整数' size='1' /></span>"));var m=null,x=jQuery("<span class='jump-page'>"+t.jump_text+"</span>").bind("click",function(e){var a=jQuery("#jump-index");return m=a.val(),null==m||""==m?void $.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_null_text,!0,null,5e3,null,!0):/^\d+$/.test(m)?m>n()||1>m?($.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_outofrange_text,!0,null,5e3,null,!0),void a.val("")):(m-=1,i(m,e)):($.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_format_text,!0,null,5e3,null,!0),void a.val(""))}).attr("href",t.link_to.replace(/__id__/,m));l.append(x),$("#jump-index").bind("keyup",function(e){if("13"==e.keyCode){var a=jQuery("#jump-index");return m=a.val(),null==m||""==m?void $.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_null_text,!0,null,5e3,null,!0):/^\d+$/.test(m)?m>n()||1>m?($.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_outofrange_text,!0,null,5e3,null,!0),void a.val("")):(m-=1,i(m,e)):($.alert('<i class="i-icon3 i-round-warn"></i>'+t.jump_format_text,!0,null,5e3,null,!0),void a.val(""))}})}}var r=t.current_page;e=!e||0>e?1:e,t.items_per_page=!t.items_per_page||t.items_per_page<0?1:t.items_per_page;var l=jQuery(this);this.selectPage=function(e){i(e)},this.prevPage=function(){return r>0?(i(r-1),!0):!1},this.nextPage=function(){return r<n()-1?(i(r+1),!0):!1},s(),t.load_first_page&&t.callback(r,this)})};