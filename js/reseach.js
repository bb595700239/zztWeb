var Score=function(){this.allScore=0,this.risk=4,this.riskType="",this.qtotal=$(".questionli").length,this.once=0,this.setClick()};Score.prototype={setClick:function(){var i=this;$('input[type="radio"]').click(function(){i.getAll(),$(this).parents(".questionli").data("stacte",!0).find(".question").removeClass("zzt-red")})},getAll:function(){var i=this;this.allScore=0,this.once=0,$.each($('input[type="radio"]:checked'),function(){i.allScore+=Number($(this).val()),i.once+=1}),this.setLevel(),this.qtotal==this.once&&($("#riskScore").show().find("#score").html(this.allScore),$("#riskType").html(this.riskType))},setLevel:function(){this.allScore<=22&&(this.riskType="保守型",this.risk=1),this.allScore>22&&this.allScore<=44&&(this.riskType="稳健型",this.risk=2),this.allScore>44&&this.allScore<=66&&(this.riskType="平衡型",this.risk=3),this.allScore>66&&this.allScore<=88&&(this.riskType="积极型",this.risk=4),this.allScore>88&&this.allScore<=100&&(this.riskType="激进型",this.risk=5)},postData:function(){if(this.getAll(),this.qtotal==this.once){if(this.allScore<22)return void $.confirm('<i class="i-icon3 i-round-warn"></i>您的评分结果是<span class="zzt-red">'+this.allScore+'</span>分(<span class="zzt-red">'+this.riskType+'</span>)，本平台产品适合<span class="zzt-red">22</span>分(<span class="zzt-red">稳健型</span>)以上投资者投资。',[{yes:"重新测评",no:"去我的账户"}],function(i){"no"==i&&(location.href="/html/account/account.html#pandect"),$("#riskScore").hide(),$(".questionli").data("stacte",!1),$("input").prop("checked",!1),this.hide()},{width:500});var i={riskMark:this.allScore,riskType:this.risk};$.ajax({url:url+"user/riskScore",type:"post",data:i,success:function(i){$.alert('<i class="i-icon3 i-round-right"></i>'+i.message,!0,function(){var i=$.getQueryString("fromurl");window.location.href=i?i:"/html/account/account.html"},3e3,null,!0)}})}else $.confirm('<i class="i-icon3 i-round-warn"></i>请填完所有选项',[{yes:"我知道了"}],function(){this.hide()},{width:400}),$.each($(".questionli"),function(){$(this).data("stacte")||$(this).find(".question").addClass("zzt-red")})}};var isScore=new Score;