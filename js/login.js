function getStatesFn(){function e(){setTimeout(function(){t.removeClass("btns-disable").html(r)},1e3)}var t=$(".surebtn .btns"),r=t.html();$.ajax({type:"POST",url:url+"user/login",data:$(".g-form").serialize()+"&tokenId="+tokenId,beforeSend:function(){t.addClass("btns-disable").html("提交中...")},success:function(t){if(e(),"success"==t.message){var r=$.getQueryString("fromurl");window.location.href=r?r:"/"}else $(".form-alert").html(t.message).show(),"手机号或密码错误"==t.message?($("#code,#pwd").val(""),$("#pwd").focus(),$("#getcodeJs").trigger("click")):"验证码错误"==t.message&&$("#code").val("").focus()},error:function(){$(".form-alert").html("系统繁忙，请稍后再试").show(),e()}})}function forgetJs(){var e="";$("#phone").val()&&(e="?phone="+$("#phone").val()),window.location.href="/html/forgetLoginPwd.html"+e}$(function(){$("#getcodeJs").click(function(){var e=$(this).find("img"),t=e.attr("src").split("?")[0];e.attr("src",t+"?t="+(new Date).getTime())}).find("img").attr("src",url+"code").end().trigger("click"),$('.btns-info:not(".btns-disable")').click(function(){var num=0;$.each($("*[data-group-state]"),function(item){return eval($(this).data("blur")),$(this).data("group-state")?void num++:!1}),3==num&&getStatesFn();var _this=$(this);$(".form-alert").removeClass("headShake animated"),setTimeout(function(){_this.data("once5201314")?$(".form-alert").addClass("headShake animated"):_this.data("once5201314",!0)},170)}),$.enterSend({main:$(".form-box"),action:function(){$('.btns-info:not(".btns-disable")').trigger("click")}})});var loginrule={erroralert:function(e,t){$(".form-group").removeClass("iserror"),e.data("group-state",!1).parents(".form-group").addClass("iserror"),$(".form-alert").html(t).show(),e.focus()},success:function(e){$(".form-group").removeClass("iserror"),e.data("group-state",!0).parents(".form-group").removeClass("iserror"),$(".form-alert").html("").hide()},empty:function(e,t){var r=e.val().replace(/(^\s+)|(\s+$)/g,"");""==r?this.erroralert(e,t):this.success(e)},phone:function(e){var t=/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/,r=e.val().replace(/(^\s+)|(\s+$)/g,"");return""==r?void this.erroralert(e,"手机号不能为空"):void(t.test(e.val())?this.success(e):this.erroralert(e,"手机格式不正确"))},yzm:function(e){var t=/^[0-9a-zA-Z]{4}$/;t.test(e.val())?this.success(e):this.erroralert(e,"图片验证码不正确")}};!function(e,t){$(e).append('<div class="loading"></div>');var r=$(t).css("backgroundImage");r=r.substring(4,r.length-1).replace('"',"").replace('"',""),$("body").append('<img id="loadImgPro" class="hide" src="'+r+'"/>'),$("#loadImgPro").load(function(){$(e).find(".loading").fadeOut(),$(t).fadeIn(),$(this).remove()})}(".login-warp-box",".login-warp-box .login-warp");